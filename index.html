<!doctype html>
<html>
<head>
	<title>Opposite Text Over</title>
	<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
	<style>
		body {
			display: block;
			position: relative;
			padding: 0;
			margin: 0;
		}
		.txt {
			font-size: 4em;
			height: 100px;
			left: 30px;
			position: fixed;
			text-align: right;
			top: 50px;
			width: 300px;
			z-index: 2;
		}
		.txt1 {
			color: #000;
		}
		.txt2 {
			clip: rect(0,0,0,0);
			color: #fff;
		}
		
		.col {
			margin: 0 0 0 160px;
			position: relative;
			top: 100px;
			z-index: 1;
		}
		.image {
			background-color: blue;
			height: 300px;
			margin-bottom: 120px;
			position: relative;
			width: 800px;
			z-index: 1;
		}
	</style>
	<script>
		$(function() {

			var $w = $(window);
			
			function getImageLightness(imageSrc,callback) {
				var img = document.createElement("img");
				img.src = imageSrc;
				img.style.display = "none";
				document.body.appendChild(img);

				var colorSum = 0;

				img.onload = function() {
					// create canvas
					var canvas = document.createElement("canvas");
					canvas.width = this.width;
					canvas.height = this.height;

					var ctx = canvas.getContext("2d");
					ctx.drawImage(this,0,0);

					var imageData = ctx.getImageData(0,0,canvas.width,canvas.height);
					var data = imageData.data;
					var r,g,b,avg;

					for(var x = 0, len = data.length; x < len; x+=4) {
						r = data[x];
						g = data[x+1];
						b = data[x+2];

						avg = Math.floor((r+g+b)/3);
						colorSum += avg;
					}

					var brightness = Math.floor(colorSum / (this.width*this.height));
					callback(brightness);
				}
			}
			function setMask(){
				$('.col').children().each(function(){

					var	imgLeftPos = $(this).offset().left,
						imgTopOff = $(this).offset().top,
						imgHeight = $(this).height(),
						$txtOver = $('.txt2'),
						txtOverWidth = $txtOver.width(),
						txtOverHeight = $txtOver.height(),
						txtOverLeftPos = $txtOver.offset().left,
						txtOverTopOff = $txtOver.offset().top,
						txtOverTopPos = $txtOver.position().top,
						overlapYdown = txtOverHeight,
						overlapYup =  imgTopOff - txtOverTopOff,
						overlapX =  Math.abs(txtOverLeftPos - imgLeftPos),
						imgScroll = (imgTopOff - $w.scrollTop());

					if(imgScroll < 0){
						overlapYdown = (imgScroll + imgHeight) - txtOverTopPos;
					}

					if(overlapYup < txtOverHeight && overlapYdown > 0 ){
						if($(this).hasClass('txt-white')){
							$txtOver.css({
								'clip' : 'rect(' + overlapYup + 'px,' + txtOverWidth + 'px,' + overlapYdown +'px,'+ overlapX + 'px)'
							});
							getImageLightness("test.jpg",function(brightness){
								console.log(brightness);
							});
						}else{
							$txtOver.css({'clip' : 'rect(0,0,0,0)'});
						}
					}
				});
			}

			$(window).scroll(function() {
				setMask();	
			});
			setMask();
		});
	</script>
</head>
<body>
	<div class="txt1 txt">Text over</div>
	<div class="txt2 txt">Text over</div>
	<div class="col">
		<div class="image txt-white"><img src="http://lorempixel.com/g/800/300/people/3/" alt=""></div>
		<div class="image "><img src="http://lorempixel.com/g/800/300/people/7/" alt=""></div>
		<div class="image txt-white"><img src="http://lorempixel.com/g/800/300/people/3/" alt=""></div>
		<div class="image "><img src="http://lorempixel.com/g/800/300/people/7/" alt=""></div>
		<div class="image "><img src="http://lorempixel.com/g/800/300/people/7/" alt=""></div>
		<div class="image txt-white"><img src="http://lorempixel.com/g/800/300/people/3/" alt=""></div>
		<div class="image txt-white"><img src="http://lorempixel.com/g/800/300/people/3/" alt=""></div>
		<div class="image "><img src="http://lorempixel.com/g/800/300/people/7/" alt=""></div>
	</div>
</body>
</html>